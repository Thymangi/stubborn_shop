{# templates/security/login.html.twig #}
{% extends 'base.html.twig' %}
{% block title %}Se connecter{% endblock %}

{% block body %}
<div class="container py-4">
  <div class="auth-card card shadow-sm mx-auto" style="max-width: 520px;">
    <div class="card-body p-4">

      <h1 class="h5 mb-3">Se connecter</h1>

      {% if error %}
        <div class="alert alert-danger py-2 mb-3">
          {{ error.messageKey|trans(error.messageData, 'security') }}
        </div>
      {% endif %}

      {# IMPORTANT : action sur la même route que check_path #}
      <form method="post" action="{{ path('app_login') }}" novalidate class="vstack gap-3">

        <div>
          <label for="email" class="form-label">Email</label>
          <input id="email"
                 name="email"                {# <= doit s'appeler "email" #}
                 type="email"
                 class="form-control form-control-sm"
                 autocomplete="username"
                 value="{{ last_username|default('') }}"
                 required>
        </div>

        <div>
          <label for="password" class="form-label">Mot de passe</label>
          <input id="password"
                 name="password"             {# <= doit s'appeler "password" #}
                 type="password"
                 class="form-control form-control-sm"
                 autocomplete="current-password"
                 required>
        </div>

        <div class="d-grid">
          <button class="btn btn-primary btn-lg" type="submit">Se connecter</button>
        </div>

        <div class="form-check mt-2">
          <input class="form-check-input" type="checkbox" id="remember_me" name="_remember_me" value="on">
          <label class="form-check-label" for="remember_me">Rester connecté</label>
        </div>

        <a class="small text-decoration-none d-inline-block mt-1"
           href="{{ path('app_forgot_password_request') }}">
          Mot de passe oublié
        </a>

        <hr class="auth-sep my-2">

        <p class="text-muted small mb-1">Pas encore inscrit ?</p>
        <div class="d-grid">
          <a class="btn btn-outline-primary btn-lg" href="{{ path('app_register') }}">Créer un compte</a>
        </div>

        <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
      </form>
    </div>
  </div>
</div>
{% endblock %}